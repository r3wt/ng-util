angular.module("ng-utils",[]).factory("$utils",["$q",function(n){function e(){}var o={async:function(n,e,o){function l(n,l){function t(e,l){e&&(a[n]=e),l&&(s[n]=l),r[n]=1,-1==r.indexOf(0)&&(""==(""+a).replace(/,/g,"")?a=null:a.join("\r\n----------\r\n"),o(a,s))}e(l,t)}var t=n.length,i=0,r=Array(t).fill(0),s=Array(t).fill(null),a=Array(t).fill(null);for(i;t>i;i++)l(i,n[i])},sync:function(n,e,o){function l(r,s){return null!=r&&i.push(r),void 0!=s&&t.push(s),0==n.length?(""==(""+i).replace(/,/g,"")?i=null:i.join("\r\n----------\r\n"),o(i,t)):void e(n.shift(),l)}var t=[],i=[];e(n.shift(),l)},loadOne:function(n,e,o,l){o||(o=function(){}),l||(l=function(){});var t=["script","link"];if(-1==t.indexOf(n))throw Error("only scripts and links supported");var i=e.replace(/\W+/g,"");if($("#"+i).length)o();else{var r=document.createElement(n);"link"==n?(r.rel="stylesheet",r.href=e,r.id=i,document.head.appendChild(r),o()):"script"==n&&(r.id=i,r.src=e,r.addEventListener("load",function(){o()},!1),r.addEventListener("error",function(){l(arguments)},!1),document.body.appendChild(r))}},load:function(){if(arguments.length>1)var e=arguments;else var e=arguments[0];var o=this;return n(function(n,l){return 0==e.length?n():void o.async(e,function(n,e){-1!=n.indexOf(".js")?o.loadOne("script",n,e,function(n){e(n)}):-1!=n.indexOf(".css")?o.loadOne("link",n,e):e()},function(e){e?l(e):n()})})}};return e.prototype=o,new e}]);