angular.module("ng-utils",[]).factory("$utils",["$q",function(n){function e(){}var t={async:function(n,e,t){function i(n,i){function r(e,i){e&&(u[n]=e),i&&(s[n]=i),o[n]=1,-1==o.indexOf(0)&&t(u,s)}e(i,r)}var r=n.length,l=0,o=Array(r).fill(0),s=Array(r).fill(null),u=Array(r).fill(null);for(l;r>l;l++)i(l,n[l])},sync:function(n,e,t){function i(o,s){return null!=o&&l.push(o),void 0!=s&&r.push(s),0==n.length?t(l,r):void e(n.shift(),i)}var r=[],l=[];e(n.shift(),i)},loadOne:function(n,e,t,i){t||(t=function(){}),i||(i=function(){});var r=function(n,e,t){function i(){n.removeEventListener(e,i),t.apply(t,arguments)}n.addEventListener(e,i,!1)},l=["script","link"];if(-1==l.indexOf(n))throw Error("only scripts and links supported");var o=e.replace(/\W+/g,"");if($("#"+o).length)t();else{var s=document.createElement(n);"link"==n?(s.rel="stylesheet",s.href=e,s.id=o):"script"==n&&(s.id=o,s.src=e,r(s,"load",t),r(s,"error",i)),document.head.appendChild(s)}},load:function(){if(arguments.length>1)var e=arguments;else var e=arguments[0];var t=this;return n(function(n,i){return 0==e.length?n():void t.async(e,function(n,i){-1!=n.indexOf(".js")?t.loadOne("script",n,i,i):-1!=n.indexOf(".css")?(t.loadOne("link",e),i()):(console.log("unknown load type for file %s. skipping.",n),i())},function(e){e.length?i(e):n()})})}};return e.prototype=t,new e}]);